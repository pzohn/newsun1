/** layuiAdmin.std-v1.2.1 LPPL License By http://www.layui.com/admin/ */
 ;layui.define(["table","form"],function(e){var t=layui.$,i=layui.table;layui.form;i.render({elem:"#LAY-app-forum-list",method:"POST",url:"https://www.hattonstar.com/shoppingGet?shop_id=1",cols:[[{type:"checkbox",fixed:"left"},{field:"id",width:100,title:"ID",sort:!0},{field:"name",title:"商品名称"},{field:"type",title:"类型"},{field:"price",width:100,title:"价格"},{field:"royalty",width:100,title:"提成"},{field:"integral",width:100,title:"积分"},{field:"avatar",title:"标题图片",width:100,templet:"#imgTpl"},{field:"time",title:"更新时间",sort:!0},{field:"flag",title:"标签",templet:"#buttonTpl",minWidth:80,align:"center"},{title:"操作",width:150,align:"center",fixed:"right",toolbar:"#table-forum-list"}]],text:"对不起，加载出现异常！"}),i.on("tool(LAY-app-forum-list)",function(e){var o=e.data;if("del"===e.event)layer.confirm("确定删除此商品？",function(i){t.ajax({type:"POST",url:"https://www.hattonstar.com/shoppingOff",dataType:"json",data:{id:o.id},success:function(e){console.log("success")},error:function(e){console.log("错误返回")}}),e.del(),layer.close(i)});else if("edit"===e.event){t(e.tr);layer.open({type:2,title:"编辑商品信息",content:"./listform.html",area:["550px","500px"],btn:["确定","取消"],resize:!1,yes:function(o,r){var a=window["layui-layer-iframe"+o],c="LAY-app-forum-submit",n=r.find("iframe").contents().find("#"+c);a.layui.form.on("submit("+c+")",function(r){var a=r.field,c="OFF",n="OFF",l="OFF";"on"==a.one_switch&&(c="on"),"on"==a.good_switch&&(n="on"),"on"==a.post_switch&&(l="on"),t.ajax({type:"POST",url:"https://www.hattonstar.com/shoppingUpdatePart",dataType:"json",data:{id:e.data.id,name:a.name,price:a.price,royalty:a.royalty,integral:a.integral,one_switch:c,good_switch:n,post_switch:l},success:function(e){console.log("success"),i.reload("LAY-app-forum-list"),layer.close(o)},error:function(e){console.log("错误返回")}})}),n.trigger("click")},success:function(t,i){var o=layer.getChildFrame("body",i);o.find("#shoping_name").val(e.data.name),o.find("#shoping_price").val(e.data.price),o.find("#shoping_royalty").val(e.data.royalty),o.find("#shoping_integral").val(e.data.integral);var r=e.data.flag;switch(r){case 0:o.find("#one_switch").removeAttr("checked"),o.find("#good_switch").removeAttr("checked"),o.find("#post_switch").removeAttr("checked");break;case 1:o.find("#one_switch").removeAttr("checked"),o.find("#good_switch").removeAttr("checked"),o.find("#post_switch").attr("checked","true");break;case 2:o.find("#one_switch").removeAttr("checked"),o.find("#good_switch").attr("checked","true"),o.find("#post_switch").removeAttr("checked");break;case 3:o.find("#one_switch").attr("checked","true"),o.find("#good_switch").removeAttr("checked"),o.find("#post_switch").removeAttr("checked");break;case 4:o.find("#one_switch").removeAttr("checked"),o.find("#good_switch").attr("checked","true"),o.find("#post_switch").attr("checked","true");break;case 5:o.find("#one_switch").attr("checked","true"),o.find("#good_switch").removeAttr("checked"),o.find("#post_switch").attr("checked","true");break;case 6:o.find("#one_switch").attr("checked","true"),o.find("#good_switch").attr("checked","true"),o.find("#post_switch").removeAttr("checked");break;default:o.find("#one_switch").attr("checked","true"),o.find("#good_switch").attr("checked","true"),o.find("#post_switch").attr("checked","true")}}})}}),i.render({elem:"#LAY-app-forumreply-list",url:layui.setter.base+"json/forum/replys.js",cols:[[{type:"checkbox",fixed:"left"},{field:"id",width:100,title:"ID",sort:!0},{field:"replyer",title:"回帖人"},{field:"cardid",title:"回帖ID",sort:!0},{field:"avatar",title:"头像",width:100,templet:"#imgTpl"},{field:"content",title:"回帖内容",width:200},{field:"replytime",title:"回帖时间",sort:!0},{title:"操作",width:150,align:"center",fixed:"right",toolbar:"#table-forum-replys"}]],page:!0,limit:10,limits:[10,15,20,25,30],text:"对不起，加载出现异常！"}),i.on("tool(LAY-app-forumreply-list)",function(e){e.data;if("del"===e.event)layer.confirm("确定删除此条评论？",function(t){e.del(),layer.close(t)});else if("edit"===e.event){t(e.tr);layer.open({type:2,title:"编辑评论",content:"../../../views/app/forum/replysform.html",area:["550px","350px"],btn:["确定","取消"],resize:!1,yes:function(t,i){var o=i.find("iframe").contents().find("#layuiadmin-form-replys"),r=o.find('textarea[name="content"]').val();e.update({content:r}),layer.close(t)},success:function(e,t){}})}}),e("forum",{})});